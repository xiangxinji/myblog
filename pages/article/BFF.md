# BFF (Backend For Frontend)

### 什么是 BFF

BFF , Backend For Frontend , （**服务于前端的后端**） 也叫用户体验适配器 , 不是什么新技术 , 只是一种对逻辑的分层

个人理解呢,就是对 S -> 客户端中间插入另外一个层 , 那这一个层就是 BFF ， 例如

```
---------------------------------------------
常规方式

++SERVER端++

↑ 1.请求 ↓ 2.响应

++BROWSER端++

--------------------------------------------
BFF 模式
--------------------------------------------
++SERVER端++

（BFF层 ↑ 2.请求  ↓ 3.响应）

↑ 1.请求

++BROWSER端++

---------------------------------------------
```

### 解决了什么问题

其实从常规方式看这个模式的话，其实也没啥问题，也能用，为啥又得多加一个 BFF 层来做处理呢 ？ 原因在于 由于后台这边的架构也在升级 ， 大多都是微服务， 将各种各样的模块不在放入同一个工程，而是将应用分布成一个一个的服务，他们这样做起来就好处多多， 功能单一，便于维护，啊 等等 。。。

但是前端这边出了大问题 ，比如前端需要完成一系列的功能， 得处理很多很多接口，来进行整合， 数据过滤，因为我们都知道，后台接口大多都是有颗粒度的，不是前端想要什么字段就给你什么字段 ， 往往都需要再去请求其他模块的接口来完成整合 ， 这样虽然也能用 ，但是会产生很多问题

1. 前端代码臃肿 / 维护性差
   导致你去维护或者查看前端代码，会发现其实一大片代码，但是完成的功能很简单
2. 导致前端人员对此项目熟练度/接口熟悉的依赖度增加
3. 开发进度缓慢 ， 不过这个事是有待商酌的，个人觉得应该看团队
4. 后台多端处理差

如果有了 BFF 话 ， 后台可以对应产品来做出对应端的 接口或逻辑

```
------------------------------------
server
------------------------------------
↑↓
bff
------------------------------------
↓           ↓       ↓
browser , mobile , pc
------------------------------------
```

### 缺点

当然他也是有缺点的 ，技术储备要求多 ， 工作量大 ， 维护量大 。。。  
因为很多公司产品都会压缩产品周期，甚至有的公司就会有一种思想，能用就行， 不愿意在通过另外的技术来完成这种非必要的功能 。 所以很多都会搁置。。

### 总结

个人而言，我觉得这是一种非常好的思想，有一个中间层来管理客户端的操作，能够很完美的解决前端或者后台的许多问题，虽然他带来的缺点有可能得不偿失。
总而言之，言而总之 在不是必要的条件下，尽可能不采用 ，当然如果实在是有 第一点的问题出现的话 ，BFF 也是一个很好的解决方案 ， 还有就是 Facebook 的 graphql 。。。
