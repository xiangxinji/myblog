# 12-1 

## content : 
    
今天用vuepress 写了一个博客,然后就搞到了78点 , 然后之后看了一下mocha 测试框架 ,坐下整理 
看到了掘金上的一篇文章,自己看了一下

[一次学会使用 mocha & jest 编写单元测试
 单元测试是什么？](https://juejin.im/post/5cc3f6c15188252d8b3ad83a)
 
 挺好的 , 在这之前弄了一下 mocha 的浏览器测试,这篇文章主要是 js测试 
 
 首先在项目里面安装抹茶(mocha)
 ```bash 
    npm i mocha chai -D 
```

然后接可以直接写测试用例了, 例如
文件a 需要测试 , 那么我们可以写一个 文件a.test.js 来进行测试 

```javascript
const expect = require('chai').expect
// 这是那个用例
const sum = require('../example/sum')
describe('第一个测试',  () => {
  it('sum', () => expect(sum(1, 2)).to.be.equal(3))
})
```

在这个后缀为.test.js 里面  describe 代表一个测试套件 , 那 it 呢就是代表一个测试用例,  
然后我们就可以使用npm run test 命令来进行测试
```json
"scripts": {
    "test": "mocha"
},
```

然后是进行异步测试 ,基本和前面代码差不多 
1. 要测试的js ↓ 
    ```javascript
    function getData () {
        return new Promise(function (resolve , reject) {
            setTimeout(() => {
                resolve('OK')
            },1000)
        })
    }
    module.exports = getData
    ```
2. 测试用例为
    ```javascript
    var expect = require('chai').expect
    const getData = require('../src/async')
    
    beforeEach( () => {console.log('测试开始了')})
    
    describe('测试异步方法', function () {
        it('测试getData方法能不能返回数据 ', function () {
           // 直接使用promise.then 方法来进行测试 ... 
            return getData().then(function ( d) {
                expect(d).to.be.equal('OK')
            }) 
        });
    });
    ```
   
   这里指的一提的是, mocha 好像采用的是偏语义化的, expect 期望, to.be 好像也是语义化的, 甚至可以不写 
   
   
   ## 2019-1 END 
