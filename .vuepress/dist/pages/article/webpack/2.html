<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack  源码剖析 (部分) | 😈Singee</title>
    <meta name="description" content="this is singee blog ">
    
    
    <link rel="preload" href="/assets/css/0.styles.b1fe51a6.css" as="style"><link rel="preload" href="/assets/js/app.4bd6ed0d.js" as="script"><link rel="preload" href="/assets/js/2.04cf5e0d.js" as="script"><link rel="preload" href="/assets/js/10.65e1a255.js" as="script"><link rel="prefetch" href="/assets/js/11.e2f01b84.js"><link rel="prefetch" href="/assets/js/12.22961756.js"><link rel="prefetch" href="/assets/js/13.b8341bc8.js"><link rel="prefetch" href="/assets/js/14.10f33b47.js"><link rel="prefetch" href="/assets/js/15.12a485e2.js"><link rel="prefetch" href="/assets/js/16.5178d31e.js"><link rel="prefetch" href="/assets/js/17.997f1a03.js"><link rel="prefetch" href="/assets/js/18.002139eb.js"><link rel="prefetch" href="/assets/js/19.2562a3fe.js"><link rel="prefetch" href="/assets/js/20.ec98c163.js"><link rel="prefetch" href="/assets/js/21.4e0609ff.js"><link rel="prefetch" href="/assets/js/22.ce78db63.js"><link rel="prefetch" href="/assets/js/23.b6e9fef9.js"><link rel="prefetch" href="/assets/js/24.509a2625.js"><link rel="prefetch" href="/assets/js/3.705aa889.js"><link rel="prefetch" href="/assets/js/4.fb877aae.js"><link rel="prefetch" href="/assets/js/5.706d86fc.js"><link rel="prefetch" href="/assets/js/6.47adba6b.js"><link rel="prefetch" href="/assets/js/7.8e50a60c.js"><link rel="prefetch" href="/assets/js/8.1c243cd5.js"><link rel="prefetch" href="/assets/js/9.289e1d4d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b1fe51a6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">😈Singee</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/pages/article/" class="nav-link router-link-active">😄文章</a></div><div class="nav-item"><a href="/pages/source/" class="nav-link">😜源码解析</a></div><div class="nav-item"><a href="/pages/base/" class="nav-link">🤨基础</a></div><div class="nav-item"><a href="/pages/middle/" class="nav-link">😵技术栈</a></div> <a href="https://github.com/xiangxinji/myblog.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    source code
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/pages/article/" class="nav-link router-link-active">😄文章</a></div><div class="nav-item"><a href="/pages/source/" class="nav-link">😜源码解析</a></div><div class="nav-item"><a href="/pages/base/" class="nav-link">🤨基础</a></div><div class="nav-item"><a href="/pages/middle/" class="nav-link">😵技术栈</a></div> <a href="https://github.com/xiangxinji/myblog.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    source code
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">😈首页</a></li><li><a href="/pages/base/" class="sidebar-link">🤨基础东东</a></li><li><a href="/pages/middle/" class="sidebar-link">📁技术栈</a></li><li><a href="/pages/source/" class="sidebar-link">🧪源代码分析</a></li><li><a href="/pages/article/webpack/" class="sidebar-link">🧫随便写写的文章</a></li><li><a href="/pages/years/2019.html" class="sidebar-link">😳年终总结</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack-源码剖析-部分"><a href="#webpack-源码剖析-部分" class="header-anchor">#</a> webpack  源码剖析 (部分)</h1> <p>用了这么久的webpack, 有些东西还是得了解一下 , 特别人他的流程,也可以学到比较多的东西, 好的废话不多说 直接开始</p> <p>首先 我们先安装 webpack , 然后在 package.json 中添加 script , build 为 : webpack
根据npm 的规范 , 如果一个模块需要成为一个命令,那你的模块中的package.json 中必须拥有 bin 字段 , 然后我们去webpack模块中的字段去看看</p> <p>可以看到 webpack/package.json中的bin字段是 ./bin/webpack.js , 所以从这里可以看出, 当我们使用命令行 , webpack 的时候 , npm 将会去执行 webpack模块中的bin文件夹中的webpack.js 这个文件</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./bin/webpack.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>好的, 现在我们可以去看一看webpack.js</p> <p>他这个js 呢总共分为几大块</p> <p>1.runCommand  用户执行某个命令</p> <p>2.isInstalled 判断你是否安装了某个包</p> <p>3.CLIs 这个变量存放着 webpack 依赖的两个包, 其实从代码可以看出, 他依赖于两个</p> <p>一个是 webpack-cli , 一个是webpack-command  (webpack-cli 功能区全, webpack-command 精简版)</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> CLIs <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		name<span class="token punctuation">:</span> <span class="token string">&quot;webpack-cli&quot;</span><span class="token punctuation">,</span>
		<span class="token keyword">package</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack-cli&quot;</span><span class="token punctuation">,</span>
		binName<span class="token punctuation">:</span> <span class="token string">&quot;webpack-cli&quot;</span><span class="token punctuation">,</span>
		alias<span class="token punctuation">:</span> <span class="token string">&quot;cli&quot;</span><span class="token punctuation">,</span>
		installed<span class="token punctuation">:</span> <span class="token function">isInstalled</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-cli&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		recommended<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		url<span class="token punctuation">:</span> <span class="token string">&quot;https://github.com/webpack/webpack-cli&quot;</span><span class="token punctuation">,</span>
		description<span class="token punctuation">:</span> <span class="token string">&quot;The original webpack full-featured CLI.&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		name<span class="token punctuation">:</span> <span class="token string">&quot;webpack-command&quot;</span><span class="token punctuation">,</span>
		<span class="token keyword">package</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack-command&quot;</span><span class="token punctuation">,</span>
		binName<span class="token punctuation">:</span> <span class="token string">&quot;webpack-command&quot;</span><span class="token punctuation">,</span>
		alias<span class="token punctuation">:</span> <span class="token string">&quot;command&quot;</span><span class="token punctuation">,</span>
		installed<span class="token punctuation">:</span> <span class="token function">isInstalled</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-command&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		recommended<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		url<span class="token punctuation">:</span> <span class="token string">&quot;https://github.com/webpack-contrib/webpack-command&quot;</span><span class="token punctuation">,</span>
		description<span class="token punctuation">:</span> <span class="token string">&quot;A lightweight, opinionated webpack CLI.&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>然后从之后的代码可以看出 , 他判断了你是否安装了 webpack-cli 或者 webpack-command 这两个包</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> installedClis <span class="token operator">=</span> CLIs<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">cli</span> <span class="token operator">=&gt;</span> cli<span class="token punctuation">.</span>installed<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>installedClis<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 做出一些警告,并提示你是否安装webpack-cli</span>
	<span class="token keyword">const</span> question <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Do you want to install 'webpack-cli' (yes/no): </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
	<span class="token comment">// answer 是回答的结果,只要以y开头 </span>
    <span class="token keyword">const</span> normalizedAnswer <span class="token operator">=</span> answer<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 默认进行安装 webpack-cli </span>
    <span class="token comment">// 然后使用 上面的 runCommand  进行安装webpack-cli </span>
        
<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>installedClis<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果安装了其中之一  </span>
    <span class="token comment">// 读取已经安装了的包中的package.json </span>
 	<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token keyword">const</span> pkgPath <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>installedClis<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>package<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/package.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token comment">// 并且引入 </span>
    <span class="token function">require</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>
 		path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>pkgPath<span class="token punctuation">)</span><span class="token punctuation">,</span>
 		pkg<span class="token punctuation">.</span>bin<span class="token punctuation">[</span>installedClis<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>binName<span class="token punctuation">]</span>
 	<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果安装了两个  , 则进行提示 , 只需要安装其中一个, 并且 退出程序</span>
    console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>
    		<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You have installed </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>installedClis
    			<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    			<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>
    				<span class="token string">&quot; and &quot;</span>
    			<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> together. To work with the &quot;webpack&quot; command you need only one CLI package, please remove one of them or use them directly via their binary.</span><span class="token template-punctuation string">`</span></span>
    	<span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token comment">// @ts-ignore</span>
    	process<span class="token punctuation">.</span>exitCode <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><hr> <p>上回可以看到 , 如果安装了其中之一则直接解析安装的package.json, 执行bin命令</p> <p>然后我们看到 webpack-cli 中的package.json的bin字段为 :</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./bin/cli.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>那么他回去执行 ./bin/下面的cli.js, 这里只做一些关键点的记录</p> <p><a href="https://blog.csdn.net/hjb2722404/article/details/89440492" target="_blank" rel="noopener noreferrer">参考别人写的一篇文章 ,写的很清楚<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>自己也是看看前辈的文章慢慢了解的</p> <ol><li><p>引入了<code>import-local</code> 包，这个包的作用在于判断某个包是本地安装的还是全局安装的；</p></li> <li><p>判断当前包（<code>webpack-cli</code>）是否全局安装，如果是全局安装，则中断执行。【意思是要求必须是项目本地安装】</p></li> <li><p>引入<code>V8引擎</code>的代码缓存功能，用于加速实例化。 require(&quot;v8-compile-cache&quot;);</p></li> <li><p>定义了<code>NON_COMPILATION_ARGS</code> 数组，该数组存储了一些不需要编译的参数</p></li> <li><p>生成了<code>NON_COMPILATION_CMD</code> 数组，该数组存储了一些不需要编译的命令</p></li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 去所有的参数里面查找 	</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./config/config-yargs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>yargs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在这个里面有一个非常重要的变量, 这里定义了webpack 参数的所有组, 总共是8个组</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token constant">CONFIG_GROUP</span><span class="token punctuation">,</span>
	<span class="token constant">BASIC_GROUP</span><span class="token punctuation">,</span>
	<span class="token constant">MODULE_GROUP</span><span class="token punctuation">,</span>
	<span class="token constant">OUTPUT_GROUP</span><span class="token punctuation">,</span>
	<span class="token constant">ADVANCED_GROUP</span><span class="token punctuation">,</span>
	<span class="token constant">RESOLVE_GROUP</span><span class="token punctuation">,</span>
	<span class="token constant">OPTIMIZE_GROUP</span><span class="token punctuation">,</span>
	<span class="token constant">DISPLAY_GROUP</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token constant">GROUPS</span><span class="token punctuation">;</span>
<span class="token comment">// 以及里面的 所有参数 , 定义了 类型,描述 , 以及所在组</span>
entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
	type<span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
	describe<span class="token punctuation">:</span> <span class="token function">getSchemaInfo</span><span class="token punctuation">(</span><span class="token string">&quot;entry&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	group<span class="token punctuation">:</span> <span class="token constant">BASIC_GROUP</span><span class="token punctuation">,</span>
	requiresArg<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token string">&quot;no-cache&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
	type<span class="token punctuation">:</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span>
	describe<span class="token punctuation">:</span> <span class="token string">&quot;Disables cached builds&quot;</span><span class="token punctuation">,</span>
	group<span class="token punctuation">:</span> <span class="token constant">BASIC_GROUP</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><ol start="6"><li><p>options = require(&quot;./utils/convert-argv&quot;)(argv);  这里将所有的参数进行转换</p></li> <li><p>实例化一个webpack对象 ,并且将 options 配置项传入</p></li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>	<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> compiler<span class="token punctuation">;</span>
	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token comment">//....</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>然后就去 webpack/package.json 找到了  main 字段</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token string">&quot;main&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;lib/webpack.js&quot;</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="8"><li>执行 webpack</li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">singee write to :</span> <span class="time">12/6/2019, 6:42:10 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4bd6ed0d.js" defer></script><script src="/assets/js/2.04cf5e0d.js" defer></script><script src="/assets/js/10.65e1a255.js" defer></script>
  </body>
</html>
